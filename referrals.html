<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الإحالات</title>
</head>
<body>
    <h1>صفحة الإحالات</h1>
    
    <!-- عرض رابط الإحالة للمستخدم -->
    <p>رابطك المميز للمشاركة: <a id="referralLink" href="#">رابط الإحالة</a></p>
    
    <!-- عرض عدد الأشخاص الذين سجلوا باستخدام رابط الإحالة -->
    <p>عدد الأشخاص الذين سجلوا باستخدام رابطك: <span id="referralsCount">0</span></p>

    <script>
        // جلب كود الإحالة من LocalStorage أو من مكان آخر
        const referralCode = localStorage.getItem('referralCode') || 'ABC123';  // استخدم كود الإحالة الفعلي هنا
        
        // بناء رابط الإحالة للمشاركة
        const referralLink = https://azuoo.github.io/_usdt.com/signup.html?ref=${referralCode};
        
        // تحديث الرابط في الصفحة
        document.getElementById('referralLink').href = referralLink; // تأكد من تحديث الـ href

        // جلب عدد الأشخاص الذين سجلوا باستخدام الرابط من Google Apps Script
        fetch(`https://script.google.com/macros/s/AKfycbwBOLuIHduv68af14S3jCWB4ZF5zgLEKwUtmkr7zSbzxeRZmZoyBsC2kugp8vxcjJTK/exec?referralCode=${referralCode}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('referralsCount').innerText = data.count;
            })
            .catch(error => {
                console.error('Error fetching referral data:', error);
            });
    </script>
</body>
</html>
